# GAI App (FastAPI) ‚Äî README

–ö—Ä–∞—Å–∏–≤—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –≥–∞–π–¥ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±–∞–∑—ã –∏ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞.

---

## üöÄ –°—Ç–µ–∫
- **Python** ‚â• 3.11
- **FastAPI** + **Uvicorn**
- **PostgreSQL**
- (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) **pipenv/venv** –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## üß∞ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3.11+ (`python --version`).
2. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PostgreSQL 13+ (`psql --version`).
3. –ü—Ä–∞–≤–∞ –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞–∫–µ—Ç–æ–≤ (`pip`, `virtualenv`/`venv`).

---

## üóÑÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

**–¶–µ–ª—å:** —Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É `gai_app`, —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres` –µ—Å—Ç—å –ø–∞—Ä–æ–ª—å `yourpass`.

### –í–∞—Ä–∏–∞–Ω—Ç A: Linux (Ubuntu/Debian)
```bash
# –∑–∞–π—Ç–∏ –≤ psql –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres
sudo -u postgres psql

-- –≤–Ω—É—Ç—Ä–∏ psql:
ALTER USER postgres WITH PASSWORD 'yourpass';
CREATE DATABASE gai_app OWNER postgres;
-- (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –Ω–∞ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω
ALTER DATABASE gai_app SET timezone TO 'Asia/Tashkent';
\q
```

### –í–∞—Ä–∏–∞–Ω—Ç B: Windows / –ª—é–±–æ–π OS —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ psql
```bash
psql -U postgres
-- –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å, –µ—Å–ª–∏ –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω

-- –≤–Ω—É—Ç—Ä–∏ psql:
ALTER USER postgres WITH PASSWORD 'yourpass';
CREATE DATABASE gai_app OWNER postgres;
ALTER DATABASE gai_app SET timezone TO 'Asia/Tashkent';
\q
```

> –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä PostgreSQL —Å–ª—É—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–æ–∫–µ—Ç—ã/–ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è ‚Äî —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ `127.0.0.1:5432` (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `postgresql.conf` –∏ `pg_hba.conf`).

---

## üîê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª **`.env`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å `app.py`) —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```env
# === SECURITY ===
SECRET_KEY=change-me-please                 # –∏—Å–ø–æ–ª—å–∑—É–π –¥–ª–∏–Ω–Ω—É—é —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É
TOKEN_TTL_SECONDS=2592000                   # 30 –¥–Ω–µ–π (30*24*60*60)

# === DATABASE ===
PGHOST=127.0.0.1
PGPORT=5432
PGDATABASE=gai_app
PGUSER=postgres
PGPASSWORD=bilmiman_17

# (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –¥–ª—è –ª–æ–≥–æ–≤/–≤—Ä–µ–º–µ–Ω–∏
TZ=Asia/Tashkent
```

> `TOKEN_TTL_SECONDS` ‚Äî –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 –¥–Ω–µ–π, –∫–∞–∫ –º—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –≤ –∫–æ–¥–µ.

---

## üèóÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
python -m venv .venv
# Linux/macOS
source .venv/bin/activate
# Windows (PowerShell)
# .\.venv\Scripts\Activate.ps1

# –æ–±–Ω–æ–≤–∏–º pip –∏ —É—Å—Ç–∞–Ω–æ–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade pip
pip install -r requirements.txt
```
–ï—Å–ª–∏ —Ñ–∞–π–ª–∞ `requirements.txt` –Ω–µ—Ç ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏ –º–∏–Ω–∏–º—É–º:
```bash
pip install fastapi uvicorn psycopg2-binary python-dotenv passlib[bcrypt]
```

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (dev)

–ò–∑ –∫–æ—Ä–Ω—è, –≥–¥–µ –ª–µ–∂–∏—Ç `app.py`:

```bash
# –∞–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ
# Linux/macOS:  source .venv/bin/activate
# Windows:      .\.venv\Scripts\Activate.ps1

# –∑–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env (python-dotenv –ø–æ–¥—Ö–≤–∞—Ç–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ)
uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger: **http://127.0.0.1:8000/docs**
- ReDoc: **http://127.0.0.1:8000/redoc**

> –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ `uvicorn app:app` –≤—ã–¥–∞—ë—Ç ¬´Could not import module "app"¬ª, —É–±–µ–¥–∏—Å—å, —á—Ç–æ **—Ñ–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `app.py`** –∏ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –∫–æ–º–∞–Ω–¥—É **–∏–∑ —Ç–æ–π –∂–µ –ø–∞–ø–∫–∏**, –≥–¥–µ –æ–Ω –ª–µ–∂–∏—Ç.

---

## üß™ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (–ª–æ–≥–∏–Ω ‚Üí —Ç–æ–∫–µ–Ω)
1. –°–æ–∑–¥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ (—á–µ—Ä–µ–∑ SQL/—Å–∫—Ä–∏–ø—Ç) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.
2. –í—ã–ø–æ–ª–Ω–∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ –ª–æ–≥–∏–Ω:
    ```bash
    curl -X POST "http://127.0.0.1:8000/api/login" \
         -H "Content-Type: application/json" \
         -d '{"username":"admin","password":"admin"}'
    ```
3. –í –æ—Ç–≤–µ—Ç–µ –±—É–¥–µ—Ç `token`, `expires_at` –∏ `ttl_seconds`.
4. –î–∞–ª—å—à–µ –¥–æ–±–∞–≤–ª—è–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>` –∫–æ –≤—Å–µ–º –∑–∞—â–∏—â—ë–Ω–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º.

---

## ‚öôÔ∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ):
pip install black isort
black .
isort .
```

```bash
# –∑–∞–ø—É—Å–∫ –±–µ–∑ –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ (prod-–ª–∞–π—Ç):
uvicorn app:app --host 0.0.0.0 --port 8000
```

---

## ‚ùóÔ∏è Troubleshooting

- **FATAL: password authentication failed for user "postgres"**
  - –ü—Ä–æ–≤–µ—Ä—å –ø–∞—Ä–æ–ª—å (`yourpass`) –∏ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `.env`.
- **could not connect to server: Connection refused**
  - –£–±–µ–¥–∏—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ —Å–ª—É—à–∞–µ—Ç `127.0.0.1:5432`.
- **Could not import module "app"**
  - –ó–∞–ø—É—Å–∫–∞–π –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –≥–¥–µ –ª–µ–∂–∏—Ç `app.py`, –∏–ª–∏ —É–∫–∞–∂–∏ –ø—É—Ç—å –º–æ–¥—É–ª–µ–º: `python -m uvicorn app:app`.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–∏–Ω–∏–º—É–º)
```
.
‚îú‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø–æ —Ç–æ–∫–µ–Ω–∞–º
–ú—ã –¥–æ–±–∞–≤–∏–ª–∏ TTL: **—Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω 30 –¥–Ω–µ–π** —Å –º–æ–º–µ–Ω—Ç–∞ –ª–æ–≥–∏–Ω–∞. –ü–æ–º–µ–Ω—è—Ç—å —Å—Ä–æ–∫ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ `TOKEN_TTL_SECONDS` –≤ `.env`.

–£–¥–∞—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üíô
